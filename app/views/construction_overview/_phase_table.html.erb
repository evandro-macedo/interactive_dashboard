<%
  # Define columns for the houses table
  columns = [
    {
      label: "Phase",
      width: "10%",
      cell: ->(house) { phase_badge(house['phase_atual']) }
    },
    {
      label: "Casa",
      width: "10%",
      cell: ->(house) { content_tag(:strong, house['job_id']) }
    },
    {
      label: "Ãšltima Atividade",
      width: "20%",
      cell: ->(house) { content_tag(:span, format_datetime_short(house['ultima_atividade']), class: "text-muted") }
    },
    {
      label: "Processo",
      width: "35%",
      cell: ->(house) { house['ultimo_processo']&.truncate(40) }
    },
    {
      label: "Status",
      width: "25%",
      cell: ->(house) { content_tag(:span, house['ultimo_status']&.truncate(25), class: "text-muted") }
    }
  ]
%>

<%= render "construction_overview/data_table",
           title: "Casas por Phase",
           rows: houses,
           columns: columns,
           entity_name: "casa",
           turbo_frame_id: "houses_table",
           selected_filter: selected_phase,
           clear_filter_path: construction_overview_index_path,
           max_height: "600px",
           empty_message: "Nenhuma casa ativa encontrada.",
           header_class: "text-primary" %>
