<%# Accept variables as locals (from broadcast) or instance variables (from controller) %>
<% total_records ||= @total_records %>
<% phase_summary ||= @phase_summary %>
<% active_houses ||= @active_houses %>
<% selected_phase ||= @selected_phase %>

<!-- Main Dashboard Layout: Tabela + Gráfico -->
<div class="row">
  <!-- Coluna Esquerda: Tabela de Casas (8 colunas) -->
  <div class="col-lg-8 mb-4">
    <%= turbo_frame_tag "houses_table" do %>
      <%= render "phase_table",
                  houses: active_houses,
                  selected_phase: selected_phase %>
    <% end %>
  </div>

  <!-- Coluna Direita: Gráfico de Pizza (4 colunas) -->
  <div class="col-lg-4 mb-4">
    <%= render "phase_chart", phase_summary: phase_summary %>
  </div>
</div>
