<td class="font-weight-bold">
  <%= link_to webhook.name, webhook, class: "text-decoration-none" %>
</td>
<td>
  <span class="badge badge-secondary"><%= webhook.process %></span>
</td>
<td>
  <span class="badge badge-info"><%= webhook.status %></span>
</td>
<td>
  <%= button_to toggle_active_slack_webhook_path(webhook),
                method: :patch,
                class: "btn btn-sm btn-#{webhook.active? ? 'success' : 'secondary'}",
                title: webhook.active? ? 'Click to deactivate' : 'Click to activate' do %>
    <% if webhook.active? %>
      <i class="fas fa-check"></i> Active
    <% else %>
      <i class="fas fa-times"></i> Inactive
    <% end %>
  <% end %>
</td>
<td>
  <% if webhook.last_triggered_at.present? %>
    <small class="text-muted">
      <%= time_ago_in_words(webhook.last_triggered_at) %> ago
    </small>
  <% else %>
    <small class="text-muted">Never</small>
  <% end %>
</td>
<td class="text-center">
  <span class="badge badge-pill badge-primary"><%= webhook.trigger_count %></span>
</td>
<td class="text-center">
  <% if webhook.trigger_count > 0 %>
    <span class="badge badge-<%= webhook.success_rate >= 80 ? 'success' : webhook.success_rate >= 50 ? 'warning' : 'danger' %>">
      <%= webhook.success_rate %>%
    </span>
  <% else %>
    <span class="text-muted">N/A</span>
  <% end %>
</td>
<td>
  <div class="btn-group" role="group">
    <%= button_to test_webhook_slack_webhook_path(webhook),
                  method: :post,
                  class: "btn btn-sm btn-outline-info",
                  title: "Test webhook" do %>
      <i class="fas fa-vial"></i>
    <% end %>

    <%= link_to edit_slack_webhook_path(webhook),
                class: "btn btn-sm btn-outline-warning",
                title: "Edit webhook" do %>
      <i class="fas fa-edit"></i>
    <% end %>

    <%= link_to webhook,
                method: :delete,
                data: {
                  confirm: "Are you sure you want to delete this webhook?",
                  turbo_method: :delete,
                  turbo_confirm: "Are you sure you want to delete this webhook?"
                },
                class: "btn btn-sm btn-outline-danger",
                title: "Delete webhook" do %>
      <i class="fas fa-trash"></i>
    <% end %>
  </div>
  <div id="webhook_test_result_<%= webhook.id %>" class="mt-2"></div>
</td>